load('transform_stream_ekf.mat');

A = t_vtk3_list(:,1:3,:);
B = -t_orb_list(:,1:3,:); %negative already added
big_mat = zeros(0, 18);
for t = 1:size(t_orb_list,3),
    pt_mat = [A(1,1,t), 0, 0, A(1,2,t), 0, 0, A(1,3,t), 0, 0, B(1,1,t), B(2,1,t), B(3,1,t), 0, 0, 0, 0, 0, 0;...
        A(2,1,t), 0, 0, A(2,2,t), 0, 0, A(2,3,t), 0, 0, 0, 0, 0, B(1,1,t), B(2,1,t), B(3,1,t), 0, 0, 0;...
        A(3,1,t), 0, 0, A(3,2,t), 0, 0, A(3,3,t), 0, 0, 0, 0, 0, 0, 0, 0, B(1,1,t), B(2,1,t), B(3,1,t);...
        0, A(1,1,t), 0, 0, A(1,2,t), 0, 0, A(1,3,t), 0, B(1,2,t), B(2,2,t), B(3,2,t), 0, 0, 0, 0, 0, 0;...
        0, A(2,1,t), 0, 0, A(2,2,t), 0, 0, A(2,3,t), 0, 0, 0, 0, B(1,2,t), B(2,2,t), B(3,2,t), 0, 0, 0;...
        0, A(3,1,t), 0, 0, A(3,2,t), 0, 0, A(3,3,t), 0, 0, 0, 0, 0, 0, 0, B(1,2,t), B(2,2,t), B(3,2,t);...
        0, 0, A(1,1,t), 0, 0, A(1,2,t), 0, 0, A(1,3,t), B(1,3,t), B(2,3,t), B(3,3,t), 0, 0, 0, 0, 0, 0;...
        0, 0, A(2,1,t), 0, 0, A(2,2,t), 0, 0, A(2,3,t), 0, 0, 0, B(1,3,t), B(2,3,t), B(3,3,t), 0, 0, 0;...
        0, 0, A(3,1,t), 0, 0, A(3,2,t), 0, 0, A(3,3,t), 0, 0, 0, 0, 0, 0, B(1,1,t), B(2,1,t), B(3,1,t)];
    big_mat = [big_mat; pt_mat];
end
[U, S, V] = svd(big_mat);